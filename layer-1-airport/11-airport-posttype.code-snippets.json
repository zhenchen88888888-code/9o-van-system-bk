{"generator":"Code Snippets v3.7.0","date_created":"2025-09-15 14:39","snippets":[{"id":86,"name":"11-Airport-PostType","code":"\/**\n * ============================================================================\n * Snippet: 11-Airport-PostType\n * Title: 9o Van \u6a5f\u5834\u63a5\u9001\u81ea\u8a02\u6587\u7ae0\u985e\u578b\n * Description: \u8a3b\u518a\u6a5f\u5834\u63a5\u9001\u9810\u7d04\u7684 Custom Post Type \u8207 Meta Boxes\n * Version: 1.0.0\n * Author: 9o Van Development Team\n * Created: 2025-09-14\n * Modified: 2025-09-14\n * Priority: 11\n * Dependencies: 00-Global-Constants, 10-Airport-Settings\n * Hook: init, add_meta_boxes, save_post\n * ============================================================================\n *\/\n\nnamespace NineOVan\\Airport;\n\n\/\/ \u9632\u6b62\u76f4\u63a5\u8a2a\u554f\nif (!defined('ABSPATH')) {\n    exit;\n}\n\n\/**\n * \u6a5f\u5834\u63a5\u9001 Post Type \u7ba1\u7406\u985e\u5225\n *\/\nclass AirportPostType {\n    \n    \/**\n     * Post Type \u540d\u7a31\n     *\/\n    const POST_TYPE = 'airport_booking';\n    \n    \/**\n     * \u5efa\u69cb\u51fd\u5f0f\n     *\/\n    public function __construct() {\n        \/\/ \u8a3b\u518a Post Type\n        add_action('init', [$this, 'register_post_type']);\n        \n        \/\/ \u8a3b\u518a\u5206\u985e\u6cd5\n        add_action('init', [$this, 'register_taxonomies']);\n        \n        \/\/ Meta Boxes\n        add_action('add_meta_boxes', [$this, 'add_meta_boxes']);\n        add_action('save_post_' . self::POST_TYPE, [$this, 'save_meta_boxes'], 10, 3);\n        \n        \/\/ \u81ea\u8a02\u6b04\u4f4d\u5217\u8868\n        add_filter('manage_' . self::POST_TYPE . '_posts_columns', [$this, 'set_custom_columns']);\n        add_action('manage_' . self::POST_TYPE . '_posts_custom_column', [$this, 'custom_column_content'], 10, 2);\n        add_filter('manage_edit-' . self::POST_TYPE . '_sortable_columns', [$this, 'sortable_columns']);\n        \n        \/\/ \u5feb\u901f\u7de8\u8f2f\n        add_action('quick_edit_custom_box', [$this, 'quick_edit_custom_box'], 10, 2);\n        \n        \/\/ \u7be9\u9078\u5668\n        add_action('restrict_manage_posts', [$this, 'add_admin_filters']);\n        add_filter('parse_query', [$this, 'filter_query']);\n        \n        \/\/ \u6279\u91cf\u64cd\u4f5c\n        add_filter('bulk_actions-edit-' . self::POST_TYPE, [$this, 'register_bulk_actions']);\n        add_filter('handle_bulk_actions-edit-' . self::POST_TYPE, [$this, 'handle_bulk_actions'], 10, 3);\n    }\n    \n    \/**\n     * \u8a3b\u518a Post Type\n     *\/\n    public function register_post_type() {\n        $labels = [\n            'name'                  => '\u6a5f\u5834\u63a5\u9001\u9810\u7d04',\n            'singular_name'         => '\u9810\u7d04',\n            'menu_name'             => '\u6a5f\u5834\u63a5\u9001',\n            'name_admin_bar'        => '\u6a5f\u5834\u63a5\u9001\u9810\u7d04',\n            'add_new'               => '\u65b0\u589e\u9810\u7d04',\n            'add_new_item'          => '\u65b0\u589e\u6a5f\u5834\u63a5\u9001\u9810\u7d04',\n            'new_item'              => '\u65b0\u9810\u7d04',\n            'edit_item'             => '\u7de8\u8f2f\u9810\u7d04',\n            'view_item'             => '\u67e5\u770b\u9810\u7d04',\n            'all_items'             => '\u6240\u6709\u9810\u7d04',\n            'search_items'          => '\u641c\u5c0b\u9810\u7d04',\n            'parent_item_colon'     => '\u4e0a\u5c64\u9810\u7d04:',\n            'not_found'             => '\u627e\u4e0d\u5230\u9810\u7d04',\n            'not_found_in_trash'    => '\u5783\u573e\u6876\u4e2d\u6c92\u6709\u9810\u7d04',\n            'featured_image'        => '\u9810\u7d04\u5716\u7247',\n            'set_featured_image'    => '\u8a2d\u5b9a\u9810\u7d04\u5716\u7247',\n            'remove_featured_image' => '\u79fb\u9664\u9810\u7d04\u5716\u7247',\n            'use_featured_image'    => '\u4f7f\u7528\u9810\u7d04\u5716\u7247',\n            'archives'              => '\u9810\u7d04\u5b58\u6a94',\n            'insert_into_item'      => '\u63d2\u5165\u9810\u7d04',\n            'uploaded_to_this_item' => '\u4e0a\u50b3\u5230\u6b64\u9810\u7d04',\n            'filter_items_list'     => '\u7be9\u9078\u9810\u7d04\u5217\u8868',\n            'items_list_navigation' => '\u9810\u7d04\u5217\u8868\u5c0e\u822a',\n            'items_list'            => '\u9810\u7d04\u5217\u8868',\n        ];\n        \n        $args = [\n            'labels'              => $labels,\n            'public'              => false,\n            'publicly_queryable'  => false,\n            'show_ui'             => true,\n            'show_in_menu'        => true,\n            'query_var'           => false,\n            'rewrite'             => false,\n            'capability_type'     => 'post',\n            'has_archive'         => false,\n            'hierarchical'        => false,\n            'menu_position'       => 26,\n            'menu_icon'           => 'dashicons-airplane',\n            'supports'            => ['title'],\n            'show_in_rest'        => false,\n            'capabilities'        => [\n                'create_posts' => 'do_not_allow', \/\/ \u7981\u6b62\u5f9e\u5f8c\u53f0\u65b0\u589e\n            ],\n            'map_meta_cap'        => true,\n        ];\n        \n        register_post_type(self::POST_TYPE, $args);\n    }\n    \n    \/**\n     * \u8a3b\u518a\u5206\u985e\u6cd5\n     *\/\n    public function register_taxonomies() {\n        \/\/ \u9810\u7d04\u72c0\u614b\u5206\u985e\n        register_taxonomy('booking_status', self::POST_TYPE, [\n            'labels' => [\n                'name'          => '\u9810\u7d04\u72c0\u614b',\n                'singular_name' => '\u72c0\u614b',\n            ],\n            'public'       => false,\n            'show_ui'      => false,\n            'show_in_menu' => false,\n            'hierarchical' => true,\n        ]);\n        \n        \/\/ \u4ed8\u6b3e\u72c0\u614b\u5206\u985e\n        register_taxonomy('payment_status', self::POST_TYPE, [\n            'labels' => [\n                'name'          => '\u4ed8\u6b3e\u72c0\u614b',\n                'singular_name' => '\u72c0\u614b',\n            ],\n            'public'       => false,\n            'show_ui'      => false,\n            'show_in_menu' => false,\n            'hierarchical' => true,\n        ]);\n    }\n    \n    \/**\n     * \u65b0\u589e Meta Boxes\n     *\/\n    public function add_meta_boxes() {\n        \/\/ \u5ba2\u6236\u8cc7\u8a0a\n        add_meta_box(\n            'customer_info',\n            '\u5ba2\u6236\u8cc7\u8a0a',\n            [$this, 'render_customer_info_box'],\n            self::POST_TYPE,\n            'normal',\n            'high'\n        );\n        \n        \/\/ \u670d\u52d9\u8a73\u60c5\n        add_meta_box(\n            'service_details',\n            '\u670d\u52d9\u8a73\u60c5',\n            [$this, 'render_service_details_box'],\n            self::POST_TYPE,\n            'normal',\n            'high'\n        );\n        \n        \/\/ \u50f9\u683c\u660e\u7d30\n        add_meta_box(\n            'price_breakdown',\n            '\u50f9\u683c\u660e\u7d30',\n            [$this, 'render_price_breakdown_box'],\n            self::POST_TYPE,\n            'normal',\n            'high'\n        );\n        \n        \/\/ \u72c0\u614b\u7ba1\u7406\n        add_meta_box(\n            'booking_status',\n            '\u72c0\u614b\u7ba1\u7406',\n            [$this, 'render_status_box'],\n            self::POST_TYPE,\n            'side',\n            'high'\n        );\n        \n        \/\/ \u64cd\u4f5c\u7d00\u9304\n        add_meta_box(\n            'action_log',\n            '\u64cd\u4f5c\u7d00\u9304',\n            [$this, 'render_action_log_box'],\n            self::POST_TYPE,\n            'normal',\n            'low'\n        );\n    }\n    \n    \/**\n     * \u6e32\u67d3\u5ba2\u6236\u8cc7\u8a0a Meta Box\n     *\/\n    public function render_customer_info_box($post) {\n        wp_nonce_field('airport_booking_meta', 'airport_booking_nonce');\n        \n        $customer_name = get_post_meta($post->ID, '_customer_name', true);\n        $customer_phone = get_post_meta($post->ID, '_customer_phone', true);\n        $customer_email = get_post_meta($post->ID, '_customer_email', true);\n        $customer_notes = get_post_meta($post->ID, '_customer_notes', true);\n        ?>\n        <table class=\"form-table\">\n            <tr>\n                <th><label for=\"customer_name\">\u59d3\u540d<\/label><\/th>\n                <td>\n                    <input type=\"text\" id=\"customer_name\" name=\"customer_name\" \n                           value=\"<?php echo esc_attr($customer_name); ?>\" class=\"regular-text\" \/>\n                <\/td>\n            <\/tr>\n            <tr>\n                <th><label for=\"customer_phone\">\u96fb\u8a71<\/label><\/th>\n                <td>\n                    <input type=\"text\" id=\"customer_phone\" name=\"customer_phone\" \n                           value=\"<?php echo esc_attr($customer_phone); ?>\" class=\"regular-text\" \/>\n                <\/td>\n            <\/tr>\n            <tr>\n                <th><label for=\"customer_email\">Email<\/label><\/th>\n                <td>\n                    <input type=\"email\" id=\"customer_email\" name=\"customer_email\" \n                           value=\"<?php echo esc_attr($customer_email); ?>\" class=\"regular-text\" \/>\n                <\/td>\n            <\/tr>\n            <tr>\n                <th><label for=\"customer_notes\">\u5099\u8a3b<\/label><\/th>\n                <td>\n                    <textarea id=\"customer_notes\" name=\"customer_notes\" rows=\"3\" class=\"large-text\"><?php \n                        echo esc_textarea($customer_notes); \n                    ?><\/textarea>\n                <\/td>\n            <\/tr>\n        <\/table>\n        <?php\n    }\n    \n    \/**\n     * \u6e32\u67d3\u670d\u52d9\u8a73\u60c5 Meta Box\n     *\/\n    public function render_service_details_box($post) {\n        $service_type = get_post_meta($post->ID, '_service_type', true);\n        $airport = get_post_meta($post->ID, '_airport', true);\n        $service_date = get_post_meta($post->ID, '_service_date', true);\n        $service_time = get_post_meta($post->ID, '_service_time', true);\n        $flight_number = get_post_meta($post->ID, '_flight_number', true);\n        $passengers = get_post_meta($post->ID, '_passengers', true);\n        $pickup_address = get_post_meta($post->ID, '_pickup_address', true);\n        $dropoff_address = get_post_meta($post->ID, '_dropoff_address', true);\n        $stops = get_post_meta($post->ID, '_stops', true);\n        $trip_type = get_post_meta($post->ID, '_trip_type', true);\n        ?>\n        <table class=\"form-table\">\n            <tr>\n                <th><label for=\"service_type\">\u670d\u52d9\u985e\u578b<\/label><\/th>\n                <td>\n                    <select id=\"service_type\" name=\"service_type\">\n                        <option value=\"pickup\" <?php selected($service_type, 'pickup'); ?>>\u63a5\u6a5f<\/option>\n                        <option value=\"dropoff\" <?php selected($service_type, 'dropoff'); ?>>\u9001\u6a5f<\/option>\n                    <\/select>\n                <\/td>\n            <\/tr>\n            <tr>\n                <th><label for=\"airport\">\u6a5f\u5834<\/label><\/th>\n                <td>\n                    <select id=\"airport\" name=\"airport\">\n                        <option value=\"TPE\" <?php selected($airport, 'TPE'); ?>>\u6843\u5712\u570b\u969b\u6a5f\u5834<\/option>\n                        <option value=\"TSA\" <?php selected($airport, 'TSA'); ?>>\u53f0\u5317\u677e\u5c71\u6a5f\u5834<\/option>\n                    <\/select>\n                <\/td>\n            <\/tr>\n            <tr>\n                <th><label for=\"trip_type\">\u884c\u7a0b\u985e\u578b<\/label><\/th>\n                <td>\n                    <select id=\"trip_type\" name=\"trip_type\">\n                        <option value=\"oneway\" <?php selected($trip_type, 'oneway'); ?>>\u55ae\u7a0b<\/option>\n                        <option value=\"roundtrip\" <?php selected($trip_type, 'roundtrip'); ?>>\u4f86\u56de<\/option>\n                    <\/select>\n                <\/td>\n            <\/tr>\n            <tr>\n                <th><label for=\"service_date\">\u670d\u52d9\u65e5\u671f<\/label><\/th>\n                <td>\n                    <input type=\"date\" id=\"service_date\" name=\"service_date\" \n                           value=\"<?php echo esc_attr($service_date); ?>\" \/>\n                <\/td>\n            <\/tr>\n            <tr>\n                <th><label for=\"service_time\">\u670d\u52d9\u6642\u9593<\/label><\/th>\n                <td>\n                    <input type=\"time\" id=\"service_time\" name=\"service_time\" \n                           value=\"<?php echo esc_attr($service_time); ?>\" \/>\n                <\/td>\n            <\/tr>\n            <tr>\n                <th><label for=\"flight_number\">\u822a\u73ed\u7de8\u865f<\/label><\/th>\n                <td>\n                    <input type=\"text\" id=\"flight_number\" name=\"flight_number\" \n                           value=\"<?php echo esc_attr($flight_number); ?>\" class=\"regular-text\" \/>\n                <\/td>\n            <\/tr>\n            <tr>\n                <th><label for=\"passengers\">\u4e58\u5ba2\u4eba\u6578<\/label><\/th>\n                <td>\n                    <input type=\"number\" id=\"passengers\" name=\"passengers\" \n                           value=\"<?php echo esc_attr($passengers); ?>\" min=\"1\" max=\"8\" \/>\n                <\/td>\n            <\/tr>\n            <tr>\n                <th><label for=\"pickup_address\">\u4e0a\u8eca\u5730\u5740<\/label><\/th>\n                <td>\n                    <input type=\"text\" id=\"pickup_address\" name=\"pickup_address\" \n                           value=\"<?php echo esc_attr($pickup_address); ?>\" class=\"large-text\" \/>\n                <\/td>\n            <\/tr>\n            <tr>\n                <th><label for=\"dropoff_address\">\u4e0b\u8eca\u5730\u5740<\/label><\/th>\n                <td>\n                    <input type=\"text\" id=\"dropoff_address\" name=\"dropoff_address\" \n                           value=\"<?php echo esc_attr($dropoff_address); ?>\" class=\"large-text\" \/>\n                <\/td>\n            <\/tr>\n            <?php if (!empty($stops) && is_array($stops)): ?>\n            <tr>\n                <th><label>\u505c\u9760\u9ede<\/label><\/th>\n                <td>\n                    <ol>\n                        <?php foreach ($stops as $stop): ?>\n                            <li><?php echo esc_html($stop['address']); ?><\/li>\n                        <?php endforeach; ?>\n                    <\/ol>\n                <\/td>\n            <\/tr>\n            <?php endif; ?>\n        <\/table>\n        \n        <?php\n        \/\/ \u5982\u679c\u662f\u4f86\u56de\u7a0b\uff0c\u986f\u793a\u56de\u7a0b\u8cc7\u8a0a\n        if ($trip_type === 'roundtrip') {\n            $return_data = get_post_meta($post->ID, '_return_data', true);\n            if (!empty($return_data)) {\n                ?>\n                <h3>\u56de\u7a0b\u8cc7\u8a0a<\/h3>\n                <table class=\"form-table\">\n                    <tr>\n                        <th>\u56de\u7a0b\u65e5\u671f<\/th>\n                        <td><?php echo esc_html($return_data['date'] ?? ''); ?><\/td>\n                    <\/tr>\n                    <tr>\n                        <th>\u56de\u7a0b\u6642\u9593<\/th>\n                        <td><?php echo esc_html($return_data['time'] ?? ''); ?><\/td>\n                    <\/tr>\n                    <tr>\n                        <th>\u56de\u7a0b\u822a\u73ed<\/th>\n                        <td><?php echo esc_html($return_data['flight'] ?? ''); ?><\/td>\n                    <\/tr>\n                <\/table>\n                <?php\n            }\n        }\n    }\n    \n    \/**\n     * \u6e32\u67d3\u50f9\u683c\u660e\u7d30 Meta Box\n     *\/\n    public function render_price_breakdown_box($post) {\n        $price_breakdown = get_post_meta($post->ID, '_price_breakdown', true);\n        $total_price = get_post_meta($post->ID, '_total_price', true);\n        \n        if (empty($price_breakdown)) {\n            echo '<p>\u5c1a\u7121\u50f9\u683c\u8cc7\u6599<\/p>';\n            return;\n        }\n        ?>\n        <table class=\"widefat\">\n            <thead>\n                <tr>\n                    <th>\u9805\u76ee<\/th>\n                    <th>\u91d1\u984d<\/th>\n                <\/tr>\n            <\/thead>\n            <tbody>\n                <?php if (!empty($price_breakdown['base_price'])): ?>\n                <tr>\n                    <td>\u57fa\u672c\u8cbb\u7528<\/td>\n                    <td>NT$ <?php echo number_format($price_breakdown['base_price']); ?><\/td>\n                <\/tr>\n                <?php endif; ?>\n                \n                <?php if (!empty($price_breakdown['night_surcharge'])): ?>\n                <tr>\n                    <td>\u591c\u9593\u52a0\u50f9<\/td>\n                    <td>NT$ <?php echo number_format($price_breakdown['night_surcharge']); ?><\/td>\n                <\/tr>\n                <?php endif; ?>\n                \n                <?php if (!empty($price_breakdown['remote_surcharge'])): ?>\n                <tr>\n                    <td>\u504f\u9060\u5730\u5340\u52a0\u50f9<\/td>\n                    <td>NT$ <?php echo number_format($price_breakdown['remote_surcharge']); ?><\/td>\n                <\/tr>\n                <?php endif; ?>\n                \n                <?php if (!empty($price_breakdown['stopover_charge'])): ?>\n                <tr>\n                    <td>\u505c\u9760\u9ede\u8cbb\u7528<\/td>\n                    <td>NT$ <?php echo number_format($price_breakdown['stopover_charge']); ?><\/td>\n                <\/tr>\n                <?php endif; ?>\n                \n                <?php if (!empty($price_breakdown['addon_charge'])): ?>\n                <tr>\n                    <td>\u52a0\u8cfc\u9805\u76ee<\/td>\n                    <td>NT$ <?php echo number_format($price_breakdown['addon_charge']); ?><\/td>\n                <\/tr>\n                <?php endif; ?>\n                \n                <?php if (!empty($price_breakdown['discount'])): ?>\n                <tr>\n                    <td>\u4f86\u56de\u7a0b\u6298\u6263<\/td>\n                    <td>-NT$ <?php echo number_format(abs($price_breakdown['discount'])); ?><\/td>\n                <\/tr>\n                <?php endif; ?>\n            <\/tbody>\n            <tfoot>\n                <tr>\n                    <th>\u7e3d\u8a08<\/th>\n                    <th style=\"font-size: 1.2em; color: #0073aa;\">\n                        NT$ <?php echo number_format($total_price); ?>\n                    <\/th>\n                <\/tr>\n            <\/tfoot>\n        <\/table>\n        <?php\n    }\n    \n    \/**\n     * \u6e32\u67d3\u72c0\u614b Meta Box\n     *\/\n    public function render_status_box($post) {\n        $booking_status = get_post_meta($post->ID, '_booking_status', true);\n        $payment_status = get_post_meta($post->ID, '_payment_status', true);\n        ?>\n        <p>\n            <label for=\"booking_status\">\u9810\u7d04\u72c0\u614b<\/label><br>\n            <select id=\"booking_status\" name=\"booking_status\" style=\"width: 100%;\">\n                <option value=\"pending\" <?php selected($booking_status, 'pending'); ?>>\u5f85\u78ba\u8a8d<\/option>\n                <option value=\"confirmed\" <?php selected($booking_status, 'confirmed'); ?>>\u5df2\u78ba\u8a8d<\/option>\n                <option value=\"in_service\" <?php selected($booking_status, 'in_service'); ?>>\u670d\u52d9\u4e2d<\/option>\n                <option value=\"completed\" <?php selected($booking_status, 'completed'); ?>>\u5df2\u5b8c\u6210<\/option>\n                <option value=\"cancelled\" <?php selected($booking_status, 'cancelled'); ?>>\u5df2\u53d6\u6d88<\/option>\n            <\/select>\n        <\/p>\n        <p>\n            <label for=\"payment_status\">\u4ed8\u6b3e\u72c0\u614b<\/label><br>\n            <select id=\"payment_status\" name=\"payment_status\" style=\"width: 100%;\">\n                <option value=\"unpaid\" <?php selected($payment_status, 'unpaid'); ?>>\u672a\u4ed8\u6b3e<\/option>\n                <option value=\"pending\" <?php selected($payment_status, 'pending'); ?>>\u4ed8\u6b3e\u4e2d<\/option>\n                <option value=\"paid\" <?php selected($payment_status, 'paid'); ?>>\u5df2\u4ed8\u6b3e<\/option>\n                <option value=\"refunded\" <?php selected($payment_status, 'refunded'); ?>>\u5df2\u9000\u6b3e<\/option>\n            <\/select>\n        <\/p>\n        \n        <?php\n        \/\/ \u986f\u793a\u9810\u7d04\u7de8\u865f\n        $booking_number = get_post_meta($post->ID, '_booking_number', true);\n        if (!empty($booking_number)) {\n            ?>\n            <p>\n                <strong>\u9810\u7d04\u7de8\u865f\uff1a<\/strong><br>\n                <code style=\"font-size: 14px;\"><?php echo esc_html($booking_number); ?><\/code>\n            <\/p>\n            <?php\n        }\n        \n        \/\/ \u986f\u793a\u5efa\u7acb\u6642\u9593\n        ?>\n        <p>\n            <strong>\u5efa\u7acb\u6642\u9593\uff1a<\/strong><br>\n            <?php echo get_the_date('Y-m-d H:i:s', $post); ?>\n        <\/p>\n        <?php\n    }\n    \n    \/**\n     * \u6e32\u67d3\u64cd\u4f5c\u7d00\u9304 Meta Box\n     *\/\n    public function render_action_log_box($post) {\n        $action_log = get_post_meta($post->ID, '_action_log', true);\n        \n        if (empty($action_log) || !is_array($action_log)) {\n            echo '<p>\u5c1a\u7121\u64cd\u4f5c\u7d00\u9304<\/p>';\n            return;\n        }\n        ?>\n        <table class=\"widefat\">\n            <thead>\n                <tr>\n                    <th>\u6642\u9593<\/th>\n                    <th>\u64cd\u4f5c<\/th>\n                    <th>\u64cd\u4f5c\u8005<\/th>\n                    <th>\u5099\u8a3b<\/th>\n                <\/tr>\n            <\/thead>\n            <tbody>\n                <?php foreach (array_reverse($action_log) as $log): ?>\n                <tr>\n                    <td><?php echo esc_html($log['time']); ?><\/td>\n                    <td><?php echo esc_html($log['action']); ?><\/td>\n                    <td><?php echo esc_html($log['user']); ?><\/td>\n                    <td><?php echo esc_html($log['note'] ?? ''); ?><\/td>\n                <\/tr>\n                <?php endforeach; ?>\n            <\/tbody>\n        <\/table>\n        <?php\n    }\n    \n    \/**\n     * \u5132\u5b58 Meta Boxes\n     *\/\n    public function save_meta_boxes($post_id, $post, $update) {\n        \/\/ \u6aa2\u67e5 nonce\n        if (!isset($_POST['airport_booking_nonce']) || \n            !wp_verify_nonce($_POST['airport_booking_nonce'], 'airport_booking_meta')) {\n            return;\n        }\n        \n        \/\/ \u6aa2\u67e5\u81ea\u52d5\u5132\u5b58\n        if (defined('DOING_AUTOSAVE') && DOING_AUTOSAVE) {\n            return;\n        }\n        \n        \/\/ \u6aa2\u67e5\u6b0a\u9650\n        if (!current_user_can('edit_post', $post_id)) {\n            return;\n        }\n        \n        \/\/ \u5132\u5b58\u5ba2\u6236\u8cc7\u8a0a\n        if (isset($_POST['customer_name'])) {\n            update_post_meta($post_id, '_customer_name', sanitize_text_field($_POST['customer_name']));\n        }\n        if (isset($_POST['customer_phone'])) {\n            update_post_meta($post_id, '_customer_phone', sanitize_text_field($_POST['customer_phone']));\n        }\n        if (isset($_POST['customer_email'])) {\n            update_post_meta($post_id, '_customer_email', sanitize_email($_POST['customer_email']));\n        }\n        if (isset($_POST['customer_notes'])) {\n            update_post_meta($post_id, '_customer_notes', sanitize_textarea_field($_POST['customer_notes']));\n        }\n        \n        \/\/ \u5132\u5b58\u670d\u52d9\u8a73\u60c5\n        if (isset($_POST['service_type'])) {\n            update_post_meta($post_id, '_service_type', sanitize_text_field($_POST['service_type']));\n        }\n        if (isset($_POST['airport'])) {\n            update_post_meta($post_id, '_airport', sanitize_text_field($_POST['airport']));\n        }\n        if (isset($_POST['trip_type'])) {\n            update_post_meta($post_id, '_trip_type', sanitize_text_field($_POST['trip_type']));\n        }\n        if (isset($_POST['service_date'])) {\n            update_post_meta($post_id, '_service_date', sanitize_text_field($_POST['service_date']));\n        }\n        if (isset($_POST['service_time'])) {\n            update_post_meta($post_id, '_service_time', sanitize_text_field($_POST['service_time']));\n        }\n        if (isset($_POST['flight_number'])) {\n            update_post_meta($post_id, '_flight_number', sanitize_text_field($_POST['flight_number']));\n        }\n        if (isset($_POST['passengers'])) {\n            update_post_meta($post_id, '_passengers', intval($_POST['passengers']));\n        }\n        if (isset($_POST['pickup_address'])) {\n            update_post_meta($post_id, '_pickup_address', sanitize_text_field($_POST['pickup_address']));\n        }\n        if (isset($_POST['dropoff_address'])) {\n            update_post_meta($post_id, '_dropoff_address', sanitize_text_field($_POST['dropoff_address']));\n        }\n        \n        \/\/ \u5132\u5b58\u72c0\u614b\n        $old_booking_status = get_post_meta($post_id, '_booking_status', true);\n        $old_payment_status = get_post_meta($post_id, '_payment_status', true);\n        \n        if (isset($_POST['booking_status'])) {\n            $new_booking_status = sanitize_text_field($_POST['booking_status']);\n            update_post_meta($post_id, '_booking_status', $new_booking_status);\n            \n            \/\/ \u5982\u679c\u72c0\u614b\u6539\u8b8a\uff0c\u8a18\u9304\u5230\u64cd\u4f5c\u65e5\u8a8c\n            if ($old_booking_status !== $new_booking_status) {\n                $this->add_action_log($post_id, '\u9810\u7d04\u72c0\u614b\u8b8a\u66f4', \n                    \"\u5f9e {$old_booking_status} \u8b8a\u66f4\u70ba {$new_booking_status}\");\n            }\n        }\n        \n        if (isset($_POST['payment_status'])) {\n            $new_payment_status = sanitize_text_field($_POST['payment_status']);\n            update_post_meta($post_id, '_payment_status', $new_payment_status);\n            \n            \/\/ \u5982\u679c\u4ed8\u6b3e\u72c0\u614b\u6539\u8b8a\uff0c\u8a18\u9304\u5230\u64cd\u4f5c\u65e5\u8a8c\n            if ($old_payment_status !== $new_payment_status) {\n                $this->add_action_log($post_id, '\u4ed8\u6b3e\u72c0\u614b\u8b8a\u66f4', \n                    \"\u5f9e {$old_payment_status} \u8b8a\u66f4\u70ba {$new_payment_status}\");\n            }\n        }\n    }\n    \n    \/**\n     * \u8a2d\u5b9a\u81ea\u8a02\u6b04\u4f4d\n     *\/\n    public function set_custom_columns($columns) {\n        $new_columns = [];\n        $new_columns['cb'] = $columns['cb'];\n        $new_columns['title'] = '\u9810\u7d04\u7de8\u865f';\n        $new_columns['customer'] = '\u5ba2\u6236';\n        $new_columns['service'] = '\u670d\u52d9';\n        $new_columns['datetime'] = '\u65e5\u671f\u6642\u9593';\n        $new_columns['route'] = '\u8def\u7dda';\n        $new_columns['price'] = '\u91d1\u984d';\n        $new_columns['booking_status'] = '\u9810\u7d04\u72c0\u614b';\n        $new_columns['payment_status'] = '\u4ed8\u6b3e\u72c0\u614b';\n        \n        return $new_columns;\n    }\n    \n    \/**\n     * \u81ea\u8a02\u6b04\u4f4d\u5167\u5bb9\n     *\/\n    public function custom_column_content($column, $post_id) {\n        switch ($column) {\n            case 'customer':\n                $name = get_post_meta($post_id, '_customer_name', true);\n                $phone = get_post_meta($post_id, '_customer_phone', true);\n                echo esc_html($name) . '<br>';\n                echo '<small>' . esc_html($phone) . '<\/small>';\n                break;\n                \n            case 'service':\n                $service_type = get_post_meta($post_id, '_service_type', true);\n                $airport = get_post_meta($post_id, '_airport', true);\n                $trip_type = get_post_meta($post_id, '_trip_type', true);\n                \n                $service_label = $service_type === 'pickup' ? '\u63a5\u6a5f' : '\u9001\u6a5f';\n                $trip_label = $trip_type === 'roundtrip' ? '\u4f86\u56de' : '\u55ae\u7a0b';\n                \n                echo esc_html($airport) . ' ' . esc_html($service_label);\n                echo '<br><small>' . esc_html($trip_label) . '<\/small>';\n                break;\n                \n            case 'datetime':\n                $date = get_post_meta($post_id, '_service_date', true);\n                $time = get_post_meta($post_id, '_service_time', true);\n                echo esc_html($date) . '<br>';\n                echo '<small>' . esc_html($time) . '<\/small>';\n                break;\n                \n            case 'route':\n                $pickup = get_post_meta($post_id, '_pickup_address', true);\n                $dropoff = get_post_meta($post_id, '_dropoff_address', true);\n                $service_type = get_post_meta($post_id, '_service_type', true);\n                \n                if ($service_type === 'pickup') {\n                    echo '<small>\u5f9e: \u6a5f\u5834<br>\u5230: ' . esc_html($dropoff) . '<\/small>';\n                } else {\n                    echo '<small>\u5f9e: ' . esc_html($pickup) . '<br>\u5230: \u6a5f\u5834<\/small>';\n                }\n                break;\n                \n            case 'price':\n                $price = get_post_meta($post_id, '_total_price', true);\n                echo '<strong>NT$ ' . number_format($price) . '<\/strong>';\n                break;\n                \n            case 'booking_status':\n                $status = get_post_meta($post_id, '_booking_status', true);\n                $status_labels = [\n                    'pending' => '<span style=\"color: orange;\">\u5f85\u78ba\u8a8d<\/span>',\n                    'confirmed' => '<span style=\"color: blue;\">\u5df2\u78ba\u8a8d<\/span>',\n                    'in_service' => '<span style=\"color: purple;\">\u670d\u52d9\u4e2d<\/span>',\n                    'completed' => '<span style=\"color: green;\">\u5df2\u5b8c\u6210<\/span>',\n                    'cancelled' => '<span style=\"color: red;\">\u5df2\u53d6\u6d88<\/span>',\n                ];\n                echo $status_labels[$status] ?? $status;\n                break;\n                \n            case 'payment_status':\n                $status = get_post_meta($post_id, '_payment_status', true);\n                $status_labels = [\n                    'unpaid' => '<span style=\"color: red;\">\u672a\u4ed8\u6b3e<\/span>',\n                    'pending' => '<span style=\"color: orange;\">\u4ed8\u6b3e\u4e2d<\/span>',\n                    'paid' => '<span style=\"color: green;\">\u5df2\u4ed8\u6b3e<\/span>',\n                    'refunded' => '<span style=\"color: gray;\">\u5df2\u9000\u6b3e<\/span>',\n                ];\n                echo $status_labels[$status] ?? $status;\n                break;\n        }\n    }\n    \n    \/**\n     * \u53ef\u6392\u5e8f\u6b04\u4f4d\n     *\/\n    public function sortable_columns($columns) {\n        $columns['datetime'] = 'service_date';\n        $columns['price'] = 'total_price';\n        $columns['booking_status'] = 'booking_status';\n        $columns['payment_status'] = 'payment_status';\n        \n        return $columns;\n    }\n    \n    \/**\n     * \u5feb\u901f\u7de8\u8f2f\u6b04\u4f4d\n     *\/\n    public function quick_edit_custom_box($column_name, $post_type) {\n        if ($post_type !== self::POST_TYPE) {\n            return;\n        }\n        \n        if ($column_name === 'booking_status') {\n            ?>\n            <fieldset class=\"inline-edit-col-right\">\n                <div class=\"inline-edit-col\">\n                    <label>\n                        <span class=\"title\">\u9810\u7d04\u72c0\u614b<\/span>\n                        <select name=\"booking_status\">\n                            <option value=\"\">\u2014 \u4e0d\u8b8a\u66f4 \u2014<\/option>\n                            <option value=\"pending\">\u5f85\u78ba\u8a8d<\/option>\n                            <option value=\"confirmed\">\u5df2\u78ba\u8a8d<\/option>\n                            <option value=\"in_service\">\u670d\u52d9\u4e2d<\/option>\n                            <option value=\"completed\">\u5df2\u5b8c\u6210<\/option>\n                            <option value=\"cancelled\">\u5df2\u53d6\u6d88<\/option>\n                        <\/select>\n                    <\/label>\n                <\/div>\n            <\/fieldset>\n            <?php\n        }\n    }\n    \n    \/**\n     * \u65b0\u589e\u7ba1\u7406\u7be9\u9078\u5668\n     *\/\n    public function add_admin_filters() {\n        global $typenow;\n        \n        if ($typenow !== self::POST_TYPE) {\n            return;\n        }\n        \n        \/\/ \u9810\u7d04\u72c0\u614b\u7be9\u9078\n        $selected_booking = isset($_GET['booking_status_filter']) ? $_GET['booking_status_filter'] : '';\n        ?>\n        <select name=\"booking_status_filter\">\n            <option value=\"\">\u6240\u6709\u9810\u7d04\u72c0\u614b<\/option>\n            <option value=\"pending\" <?php selected($selected_booking, 'pending'); ?>>\u5f85\u78ba\u8a8d<\/option>\n            <option value=\"confirmed\" <?php selected($selected_booking, 'confirmed'); ?>>\u5df2\u78ba\u8a8d<\/option>\n            <option value=\"in_service\" <?php selected($selected_booking, 'in_service'); ?>>\u670d\u52d9\u4e2d<\/option>\n            <option value=\"completed\" <?php selected($selected_booking, 'completed'); ?>>\u5df2\u5b8c\u6210<\/option>\n            <option value=\"cancelled\" <?php selected($selected_booking, 'cancelled'); ?>>\u5df2\u53d6\u6d88<\/option>\n        <\/select>\n        <?php\n        \n        \/\/ \u4ed8\u6b3e\u72c0\u614b\u7be9\u9078\n        $selected_payment = isset($_GET['payment_status_filter']) ? $_GET['payment_status_filter'] : '';\n        ?>\n        <select name=\"payment_status_filter\">\n            <option value=\"\">\u6240\u6709\u4ed8\u6b3e\u72c0\u614b<\/option>\n            <option value=\"unpaid\" <?php selected($selected_payment, 'unpaid'); ?>>\u672a\u4ed8\u6b3e<\/option>\n            <option value=\"pending\" <?php selected($selected_payment, 'pending'); ?>>\u4ed8\u6b3e\u4e2d<\/option>\n            <option value=\"paid\" <?php selected($selected_payment, 'paid'); ?>>\u5df2\u4ed8\u6b3e<\/option>\n            <option value=\"refunded\" <?php selected($selected_payment, 'refunded'); ?>>\u5df2\u9000\u6b3e<\/option>\n        <\/select>\n        <?php\n        \n        \/\/ \u65e5\u671f\u7bc4\u570d\u7be9\u9078\n        $date_from = isset($_GET['date_from']) ? $_GET['date_from'] : '';\n        $date_to = isset($_GET['date_to']) ? $_GET['date_to'] : '';\n        ?>\n        <input type=\"date\" name=\"date_from\" value=\"<?php echo esc_attr($date_from); ?>\" placeholder=\"\u958b\u59cb\u65e5\u671f\" \/>\n        <input type=\"date\" name=\"date_to\" value=\"<?php echo esc_attr($date_to); ?>\" placeholder=\"\u7d50\u675f\u65e5\u671f\" \/>\n        <?php\n    }\n    \n    \/**\n     * \u7be9\u9078\u67e5\u8a62\n     *\/\n    public function filter_query($query) {\n        global $pagenow, $typenow;\n        \n        if ($pagenow !== 'edit.php' || $typenow !== self::POST_TYPE || !$query->is_main_query()) {\n            return;\n        }\n        \n        $meta_query = [];\n        \n        \/\/ \u9810\u7d04\u72c0\u614b\u7be9\u9078\n        if (!empty($_GET['booking_status_filter'])) {\n            $meta_query[] = [\n                'key' => '_booking_status',\n                'value' => sanitize_text_field($_GET['booking_status_filter']),\n                'compare' => '='\n            ];\n        }\n        \n        \/\/ \u4ed8\u6b3e\u72c0\u614b\u7be9\u9078\n        if (!empty($_GET['payment_status_filter'])) {\n            $meta_query[] = [\n                'key' => '_payment_status',\n                'value' => sanitize_text_field($_GET['payment_status_filter']),\n                'compare' => '='\n            ];\n        }\n        \n        \/\/ \u65e5\u671f\u7bc4\u570d\u7be9\u9078\n        if (!empty($_GET['date_from']) || !empty($_GET['date_to'])) {\n            $date_query = [\n                'key' => '_service_date',\n                'compare' => 'BETWEEN',\n                'type' => 'DATE'\n            ];\n            \n            $date_from = !empty($_GET['date_from']) ? $_GET['date_from'] : '2000-01-01';\n            $date_to = !empty($_GET['date_to']) ? $_GET['date_to'] : '2099-12-31';\n            \n            $date_query['value'] = [$date_from, $date_to];\n            $meta_query[] = $date_query;\n        }\n        \n        if (!empty($meta_query)) {\n            $query->set('meta_query', $meta_query);\n        }\n        \n        \/\/ \u6392\u5e8f\n        if (!empty($_GET['orderby'])) {\n            switch ($_GET['orderby']) {\n                case 'service_date':\n                    $query->set('meta_key', '_service_date');\n                    $query->set('orderby', 'meta_value');\n                    break;\n                case 'total_price':\n                    $query->set('meta_key', '_total_price');\n                    $query->set('orderby', 'meta_value_num');\n                    break;\n            }\n        }\n    }\n    \n    \/**\n     * \u8a3b\u518a\u6279\u91cf\u64cd\u4f5c\n     *\/\n    public function register_bulk_actions($bulk_actions) {\n        $bulk_actions['mark_confirmed'] = '\u6a19\u8a18\u70ba\u5df2\u78ba\u8a8d';\n        $bulk_actions['mark_completed'] = '\u6a19\u8a18\u70ba\u5df2\u5b8c\u6210';\n        $bulk_actions['mark_cancelled'] = '\u6a19\u8a18\u70ba\u5df2\u53d6\u6d88';\n        $bulk_actions['export_csv'] = '\u532f\u51fa CSV';\n        \n        return $bulk_actions;\n    }\n    \n    \/**\n     * \u8655\u7406\u6279\u91cf\u64cd\u4f5c\n     *\/\n    public function handle_bulk_actions($redirect_to, $action, $post_ids) {\n        switch ($action) {\n            case 'mark_confirmed':\n                foreach ($post_ids as $post_id) {\n                    update_post_meta($post_id, '_booking_status', 'confirmed');\n                    $this->add_action_log($post_id, '\u6279\u91cf\u64cd\u4f5c', '\u6a19\u8a18\u70ba\u5df2\u78ba\u8a8d');\n                }\n                $redirect_to = add_query_arg('bulk_confirmed', count($post_ids), $redirect_to);\n                break;\n                \n            case 'mark_completed':\n                foreach ($post_ids as $post_id) {\n                    update_post_meta($post_id, '_booking_status', 'completed');\n                    $this->add_action_log($post_id, '\u6279\u91cf\u64cd\u4f5c', '\u6a19\u8a18\u70ba\u5df2\u5b8c\u6210');\n                }\n                $redirect_to = add_query_arg('bulk_completed', count($post_ids), $redirect_to);\n                break;\n                \n            case 'mark_cancelled':\n                foreach ($post_ids as $post_id) {\n                    update_post_meta($post_id, '_booking_status', 'cancelled');\n                    $this->add_action_log($post_id, '\u6279\u91cf\u64cd\u4f5c', '\u6a19\u8a18\u70ba\u5df2\u53d6\u6d88');\n                }\n                $redirect_to = add_query_arg('bulk_cancelled', count($post_ids), $redirect_to);\n                break;\n                \n            case 'export_csv':\n                $this->export_bookings_csv($post_ids);\n                exit;\n        }\n        \n        return $redirect_to;\n    }\n    \n    \/**\n     * \u65b0\u589e\u64cd\u4f5c\u65e5\u8a8c\n     *\/\n    private function add_action_log($post_id, $action, $note = '') {\n        $log = get_post_meta($post_id, '_action_log', true);\n        \n        if (!is_array($log)) {\n            $log = [];\n        }\n        \n        $current_user = wp_get_current_user();\n        \n        $log[] = [\n            'time' => current_time('Y-m-d H:i:s'),\n            'action' => $action,\n            'user' => $current_user->display_name,\n            'note' => $note\n        ];\n        \n        update_post_meta($post_id, '_action_log', $log);\n    }\n    \n    \/**\n     * \u532f\u51fa CSV\n     *\/\n    private function export_bookings_csv($post_ids) {\n        \/\/ \u8a2d\u5b9a CSV headers\n        header('Content-Type: text\/csv; charset=utf-8');\n        header('Content-Disposition: attachment; filename=\"airport_bookings_' . date('Ymd_His') . '.csv\"');\n        \n        \/\/ \u52a0\u5165 BOM \u4ee5\u652f\u63f4 Excel \u4e2d\u6587\n        echo \"\\xEF\\xBB\\xBF\";\n        \n        \/\/ \u958b\u555f\u8f38\u51fa\u6d41\n        $output = fopen('php:\/\/output', 'w');\n        \n        \/\/ CSV \u6a19\u984c\u5217\n        fputcsv($output, [\n            '\u9810\u7d04\u7de8\u865f',\n            '\u5ba2\u6236\u59d3\u540d',\n            '\u5ba2\u6236\u96fb\u8a71',\n            '\u5ba2\u6236Email',\n            '\u670d\u52d9\u985e\u578b',\n            '\u6a5f\u5834',\n            '\u884c\u7a0b\u985e\u578b',\n            '\u670d\u52d9\u65e5\u671f',\n            '\u670d\u52d9\u6642\u9593',\n            '\u822a\u73ed\u7de8\u865f',\n            '\u4e58\u5ba2\u4eba\u6578',\n            '\u4e0a\u8eca\u5730\u5740',\n            '\u4e0b\u8eca\u5730\u5740',\n            '\u7e3d\u91d1\u984d',\n            '\u9810\u7d04\u72c0\u614b',\n            '\u4ed8\u6b3e\u72c0\u614b',\n            '\u5efa\u7acb\u6642\u9593'\n        ]);\n        \n        \/\/ \u8f38\u51fa\u8cc7\u6599\n        foreach ($post_ids as $post_id) {\n            $booking_number = get_post_meta($post_id, '_booking_number', true);\n            $customer_name = get_post_meta($post_id, '_customer_name', true);\n            $customer_phone = get_post_meta($post_id, '_customer_phone', true);\n            $customer_email = get_post_meta($post_id, '_customer_email', true);\n            $service_type = get_post_meta($post_id, '_service_type', true);\n            $airport = get_post_meta($post_id, '_airport', true);\n            $trip_type = get_post_meta($post_id, '_trip_type', true);\n            $service_date = get_post_meta($post_id, '_service_date', true);\n            $service_time = get_post_meta($post_id, '_service_time', true);\n            $flight_number = get_post_meta($post_id, '_flight_number', true);\n            $passengers = get_post_meta($post_id, '_passengers', true);\n            $pickup_address = get_post_meta($post_id, '_pickup_address', true);\n            $dropoff_address = get_post_meta($post_id, '_dropoff_address', true);\n            $total_price = get_post_meta($post_id, '_total_price', true);\n            $booking_status = get_post_meta($post_id, '_booking_status', true);\n            $payment_status = get_post_meta($post_id, '_payment_status', true);\n            $post = get_post($post_id);\n            \n            fputcsv($output, [\n                $booking_number,\n                $customer_name,\n                $customer_phone,\n                $customer_email,\n                $service_type === 'pickup' ? '\u63a5\u6a5f' : '\u9001\u6a5f',\n                $airport,\n                $trip_type === 'roundtrip' ? '\u4f86\u56de' : '\u55ae\u7a0b',\n                $service_date,\n                $service_time,\n                $flight_number,\n                $passengers,\n                $pickup_address,\n                $dropoff_address,\n                $total_price,\n                $booking_status,\n                $payment_status,\n                $post->post_date\n            ]);\n        }\n        \n        fclose($output);\n    }\n}\n\n\/\/ \u521d\u59cb\u5316\nnew AirportPostType();\n\n\/\/ \u63d0\u4f9b\u5168\u57df\u51fd\u6578\nif (!function_exists('_9o_van_create_airport_booking')) {\n    \/**\n     * \u5efa\u7acb\u6a5f\u5834\u63a5\u9001\u9810\u7d04\n     *\/\n    function _9o_van_create_airport_booking($data) {\n        \/\/ \u751f\u6210\u9810\u7d04\u7de8\u865f\n        $booking_number = 'APT' . date('Ymd') . str_pad(wp_rand(1, 9999), 4, '0', STR_PAD_LEFT);\n        \n        \/\/ \u5efa\u7acb\u6587\u7ae0\n        $post_data = [\n            'post_title' => $booking_number,\n            'post_type' => AirportPostType::POST_TYPE,\n            'post_status' => 'private',\n            'meta_input' => [\n                '_booking_number' => $booking_number,\n                '_customer_name' => $data['customer_name'] ?? '',\n                '_customer_phone' => $data['customer_phone'] ?? '',\n                '_customer_email' => $data['customer_email'] ?? '',\n                '_customer_notes' => $data['customer_notes'] ?? '',\n                '_service_type' => $data['service_type'] ?? 'pickup',\n                '_airport' => $data['airport'] ?? 'TPE',\n                '_trip_type' => $data['trip_type'] ?? 'oneway',\n                '_service_date' => $data['service_date'] ?? '',\n                '_service_time' => $data['service_time'] ?? '',\n                '_flight_number' => $data['flight_number'] ?? '',\n                '_passengers' => $data['passengers'] ?? 1,\n                '_pickup_address' => $data['pickup_address'] ?? '',\n                '_dropoff_address' => $data['dropoff_address'] ?? '',\n                '_stops' => $data['stops'] ?? [],\n                '_return_data' => $data['return_data'] ?? null,\n                '_price_breakdown' => $data['price_breakdown'] ?? [],\n                '_total_price' => $data['total_price'] ?? 0,\n                '_booking_status' => 'pending',\n                '_payment_status' => 'unpaid',\n                '_action_log' => [[\n                    'time' => current_time('Y-m-d H:i:s'),\n                    'action' => '\u5efa\u7acb\u9810\u7d04',\n                    'user' => '\u7cfb\u7d71',\n                    'note' => '\u524d\u53f0\u63d0\u4ea4'\n                ]]\n            ]\n        ];\n        \n        $post_id = wp_insert_post($post_data);\n        \n        if (!is_wp_error($post_id)) {\n            return [\n                'success' => true,\n                'booking_id' => $post_id,\n                'booking_number' => $booking_number\n            ];\n        }\n        \n        return [\n            'success' => false,\n            'error' => $post_id->get_error_message()\n        ];\n    }\n}\n\nif (!function_exists('_9o_van_get_airport_booking')) {\n    \/**\n     * \u53d6\u5f97\u6a5f\u5834\u63a5\u9001\u9810\u7d04\n     *\/\n    function _9o_van_get_airport_booking($booking_id) {\n        $post = get_post($booking_id);\n        \n        if (!$post || $post->post_type !== AirportPostType::POST_TYPE) {\n            return null;\n        }\n        \n        return [\n            'id' => $post->ID,\n            'booking_number' => get_post_meta($post->ID, '_booking_number', true),\n            'customer_name' => get_post_meta($post->ID, '_customer_name', true),\n            'customer_phone' => get_post_meta($post->ID, '_customer_phone', true),\n            'customer_email' => get_post_meta($post->ID, '_customer_email', true),\n            'service_type' => get_post_meta($post->ID, '_service_type', true),\n            'airport' => get_post_meta($post->ID, '_airport', true),\n            'trip_type' => get_post_meta($post->ID, '_trip_type', true),\n            'service_date' => get_post_meta($post->ID, '_service_date', true),\n            'service_time' => get_post_meta($post->ID, '_service_time', true),\n            'total_price' => get_post_meta($post->ID, '_total_price', true),\n            'booking_status' => get_post_meta($post->ID, '_booking_status', true),\n            'payment_status' => get_post_meta($post->ID, '_payment_status', true),\n        ];\n    }\n}","active":true,"priority":11,"modified":"2025-09-14 01:25:26","revision":"1"}]}